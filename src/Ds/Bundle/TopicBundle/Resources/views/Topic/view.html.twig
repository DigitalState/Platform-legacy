{% extends 'OroUIBundle:actions:view.html.twig' %}

{% import 'OroUIBundle::macros.html.twig' as UI %}

{% block pageHeader %}
    {% set breadcrumbs = {
        entity: entity,
        indexPath: path('ds_topic_topic_index'),
        indexLabel: 'ds.topic.menu.index.label'|trans,
        entityTitle: entity.defaultTitle
    } %}
    {{ parent() }}
{% endblock pageHeader %}

{% block navButtons %}
    {% if resource_granted('ds.communication.communication.create') %}
        {#{{ UI.button({#}
            {#path: path('ds_topic_communication_create', { id: entity.id }),#}
            {#label: 'ds.communication.button.create'|trans,#}
            {#aCss: 'btn-primary'#}
        {#}) }}#}
    {% endif %}
    {% if resource_granted('ds.topic.topic.edit', entity) %}
        {{ UI.editButton({
            path: path('ds_topic_topic_edit', { id: entity.id }),
            entity_label: 'ds.topic.entity_label'|trans
        }) }}
    {% endif %}
    {% if resource_granted('ds.topic.topic.delete', entity) %}
        {{ UI.deleteButton({
            dataUrl: path('ds_topic_api_rest_delete_topic', { id: entity.id }),
            dataRedirect: path('ds_topic_topic_index'),
            aCss: 'no-hash remove-button',
            id: 'btn-remove-topic',
            dataId: entity.id,
            entity_label: 'ds.topic.entity_label'|trans,
        }) }}
    {% endif %}
{% endblock navButtons %}

{% block content_data %}
    {% set dataBlocks = [] %}
    {% for widget in ds_widgets({ position: 'ds_topic_topic_entity', context: context }, { entity: entity, context: context }) %}
        {% set dataBlocks = dataBlocks|merge([ {
            title: widget.title|trans,
            subblocks: [ {
                data : [ widget.content ]
            } ]
        } ]) %}
    {% endfor %}
    {% set id = 'topic-view' %}
    {% set data = { dataBlocks: dataBlocks } %}
    {{ parent() }}
{% endblock content_data %}
